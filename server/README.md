# Назва Вашого Проєкту

Короткий опис вашого проєкту. Цей документ надасть вам всю необхідну інформацію для запуску та розуміння архітектури системи.

---

## Зміст

* [1. Як Запустити Проєкт](#1-як-запустити-проєкт)
    * [1.1. Встановлення Залежностей](#12-встановлення-залежностей)
    * [1.2. Запуск Застосунку](#14-запуск-застосунку)
* [2. Опис Проєкту та Архітектури](#2-опис-проєкту-та-архітектури)
    * [2.1. Шлях Запиту (Request Flow)](#21-шлях-запиту-request-flow)
    * [2.2. Архітектура та Відповідальності Компонентів](#22-архітектура-та-відповідальності-компонентів)
        * [app/](#app)
        * [routes/](#routes)
        * [middlewares/](#middlewares)
        * [controllers/](#controllers)
        * [services/](#services)
        * [models/](#models)
        * [utils/](#utils)
        * [config/](#config)
        * [types/](#types)
        * [schemas/](#schemas)

---

## 1. Як Запустити Проєкт

Розділ з інструкцією по запуску


### 1.1. Встановлення Залежностей

Клонуйте репозиторій та встановіть всі необхідні залежності проєкту:

```bash
git clone <https://github.com/P0rtOs/WEB-TEST3.git>
cd </WEB-TEST3/server>
npm install # Або 'yarn install', якщо ви використовуєте Yarn
```
### 1.2. Запуск Застосунку
```bash
npm run dev # Або 'yarn run dev'
```

## 2. Опис Проєкту та Архітектури

Цей розділ детально описує внутрішню структуру проєкту, шлях обробки запитів та відповідальності кожного компонента.

### 2.1. Шлях Запиту (Request Flow)

Для кращого розуміння, ось послідовність, за якою HTTP-запит проходить через застосунок:

1.  **`app/`**: Тут відбувається **ініціалізація** Express-застосунку, підключення до бази даних та налаштування всіх основних middleware. Запит надходить сюди першим.
2.  **`routes/`**: Запит перенаправляється до відповідного маршруту, який відповідає URL запиту. Тут відбувається опис ендпоінтів та їх зв'язок з middleware та контролерами.
3.  **`middlewares/`**: Перед тим, як потрапити до контролера, запит може пройти через один або кілька middleware-функцій. Вони виконують базові перевірки (наприклад, валідацію, автентифікацію) і, у разі успіху, передають запит далі. У випадку помилки, middleware може самостійно сформувати відповідь.
4.  **`controllers/`**: Контролер отримує вже оброблений запит від middleware. Його основна роль – передати запит до відповідного **сервісу** для бізнес-логіки. Отримавши відповідь від сервісу, контролер **формує HTTP-відповідь (JSON-респонс)** згідно з ТЗ.
5.  **`services/`**: Сервіс відповідає за виконання **бізнес-логіки**. Він парсить, обробляє дані, виконує необхідні розрахунки та, за потреби, взаємодіє з **моделями** для роботи з базою даних.
6.  **`models/`**: Модель є інтерфейсом для взаємодії з базою даних. Вона звертається до БД для виконання CRUD-операцій (створення, читання, оновлення, видалення даних). Після отримання даних від БД, запит повертається: `модель` -> `сервіс` -> `контролер` -> `клієнт`.

### 2.2. Архітектура та Відповідальності Компонентів

Цей розділ деталізує кожен каталог та його функціональне призначення.

#### app/
([Дивитись код у папці `app/`](./app/))

* **Відповідальність:** Ініціалізація Express-застосунку, налаштування глобальних middleware, підключення маршрутів та запуск сервера. Це точка входу для конфігурації всього застосунку.

#### routes/
([Дивитись код у папці `routes/`](./src/routes/))

* **Відповідальність:** Визначення всіх API-ендпоінтів застосунку. Кожен файл у цій папці відповідає за групу маршрутів (наприклад, `userRoutes.ts`, `movieRoutes.ts`). Тут маршрути пов'язуються з відповідними middleware та контролерами.

#### middlewares/
([Дивитись код у папці `middlewares/`](./src/middlewares/))

* **Відповідальність:** Містить загальні **middleware-функції**, які виконуються до або після обробки запиту контролером. Сюди входять, наприклад, **глобальні обробники помилок**.

#### validation/
([Дивитись код у папці `middlewares/validation/`](./src/middlewares/validation/))

* **Відповідальність:** Цей підкаталог містить middleware для **валідації вхідних даних** (для користувачів, фільмів тощо) за допомогою `Zod-схем`. У разі провалу валідації, цей middleware самостійно формує HTTP-відповідь з помилкою, і запит **не доходить до контролера**.
* Також тут відбувається **перевірка токена автентифікації**. Це місце, де можна реалізувати логіку обробки різних ролей користувачів. Усі допоміжні функції для обробки токенів знаходяться у [`utils/TokenFunctions.ts`](./src/utils/TokenFunctions.ts).

#### controllers/
([Дивитись код у папці `controllers/`](./src/controllers/))

* **Відповідальність:** Обробка HTTP-запитів після їх валідації. Основна функція контролера – **делегувати бізнес-логіку сервісам** та **формувати HTTP-відповідь (JSON-респонс)** на основі даних, отриманих від сервісів, відповідно до визначеного ТЗ. Контролер є "інтерфейсом" між HTTP-протоколом та бізнес-логікою застосунку.

#### services/
([Дивитись код у папці `services/`](./src/services/))

* **Відповідальність:** Реалізація **бізнес-логіки** застосунку. Тут відбуваються основні операції: обробка даних, виконання розрахунків, маніпуляції з даними, що не стосуються прямого доступу до БД. Сервіси взаємодіють з моделями для отримання або збереження даних.

#### models/
([Дивитись код у папці `models/`](./src/models/))

* **Відповідальність:** Взаємодія з **базою даних**. Кожен файл у цій папці представляє **модель даних** (таблицю в БД), відповідає за **ініціалізацію таблиць** та їхніх **зв'язків** (асоціацій) за допомогою ORM (Sequelize). Будь-які прямі запити до БД повинні відбуватися через методи відповідної моделі.

#### utils/
([Дивитись код у папці `utils/`](./src/utils/))

* **Відповідальність:** Містить допоміжні функції та об'єкти, що використовуються в різних частинах застосунку. Сюди входять:
    * **Об'єкти логера**: Використовуються для централізованого логування подій та помилок.
    * **Допоміжні функції**: Функції, які могли б бути в сервісах, але винесені в окремі файли через їхній розмір або повторюваність, для покращення модульності та читабельності коду (наприклад, `TokenFunctions.ts`).

#### config/
([Дивитись код у папці `config/`](./src/config/))

* **Відповідальність:** Управління конфігурацією застосунку.
    * **`index.ts`**: Файл, який відповідає за читання всіх змінних середовища з `.env` та надання їх застосунку.
    * **`.database.ts`**: Файл(и) для ініціалізації ORM (Sequelize) та налаштування підключення до бази даних.

#### types/
([Дивитись код у папці `types/`](./src/types/))

* **Відповідальність:** Визначення всіх необхідних **DTO (Data Transfer Objects)** та інших TypeScript-типів. Тут описується, як виглядають дані:
    * При передачі в запиті (тіло запиту, параметри).
    * При збереженні в базі даних.
    * Як виглядають дані, що повертаються API.
    * Також тут може бути файл з описом типів для **Query параметрів** HTTP-запитів.

#### schemas/
([Дивитись код у папці `schemas/`](./src/schemas/))

* **Відповідальність:** Містить **Zod-схеми**, які використовуються для **валідації** вхідних даних. Наприклад, тут визначаються правила для розміру пароля, формату email, типу даних для інших полів тощо. Ці схеми використовуються в middleware для забезпечення цілісності та безпеки даних.